---
import BaseNavigation from "../components/layout/BaseNavigation.astro"
import BaseHead from "../components/layout/BaseHead.astro"
import Footer from "../components/layout/Footer.astro"
import MobileSocials from "../components/home/MobileSocials.astro";

import CookieConsent from '../components/cookie-consent/CookieConsent.astro';

import ConsentManager from '../components/cookie-consent/ConsentManager.astro';


import "../styles/reset.css"
import "../styles/global.css"

export interface Props {
	title: string;
	description: string;
	classList?: string;
	pageTitle: string;
	socialImg?: URL;
}

const { title, description, pageTitle } = Astro.props;

---
<!DOCTYPE html>
<html lang="en">
	<body>
		<a href="#main-content" class="skip-link">Skip to main content</a>
		<div class="head">
			<BaseHead title={title} pageTitle={pageTitle} description={description} />
			<BaseNavigation />
			<MobileSocials/>
		</div>
		<main id="main-content">
			<slot />
			<div transition:persist="find-me-on-the-other-side" id="cc-container">
				<CookieConsent />
				<script is:inline>
					// Restore the `show--consent` class if it was present before the page swap
					document.addEventListener('astro:before-preparation', (event) => {
					  const htmlClassName = window.document.documentElement.className;
					  const consentClassPresent = htmlClassName.includes('show--consent') ? true : false;
					  window._showConsentClass = consentClassPresent;
					});
			  
					document.addEventListener('astro:before-swap', (event) => {
					  const showConsent = window._showConsentClass ? ` show--consent` : '';
					  event.newDocument.documentElement.className += showConsent;
					});
				  </script>
			</div>

		</main>
		<Footer />
	</body>
</html>

<style lang="scss">
	body {
		display: grid;
		grid-template-rows: auto 1fr auto;
		min-height: 100vh;
		background-color: rgb(247, 247, 247);
	}
	
	.skip-link {
		position: absolute;
		top: -40px;
		left: 0;
		background: var(--clr-accent-400);
		color: white;
		padding: 8px;
		z-index: 9999;
		transition: top 0.2s ease;
		
		&:focus {
			top: 0;
		}
	}
</style>