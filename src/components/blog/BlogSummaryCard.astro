---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";

export interface Props {
	post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
// console.log(post);

const { title, description, pubDate, image } = post.data
---

<a href={`/blog/${post.id}/`} class="blog__card">
    <div class="image-container">
        <Image src={image} alt={title} width={800} height={400} format="avif"/>
    </div>
    <div class="content">
        <time datetime={pubDate.toISOString()} class="pub-date">
            {pubDate.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            })}
        </time>
        <h2>{title}</h2>
        <p>{description}</p>
        <p class="read-more">Read post &rarr;</p>
    </div>
</a>

<style>
	.blog__card {
		padding: 1rem;
		background-color: var(--color-background-offset);
		border-radius: 12px;
		height: 100%;
		max-height: 500px;
		max-width: 100%;
		display: flex;
		flex-direction: column;
		background-color: rgba(218, 171, 18, 0.232);
		box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
		transition: all 0.2s ease-in-out;
	}

	.blog__card:hover {
		transform: translateY(-4px);
		box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
	}

	.image-container {
        aspect-ratio: 16/9;
        height: 50%; /* Adjust this value to control the image height */
        overflow: hidden;
        border-radius: 8px;
        margin: -0.5rem -0.5rem 0;
        padding: 0.5rem;
		flex-grow: 1;
    }

	.image-container img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		display: block;
		border-radius: 6px;
	}

	.blog__card:hover {
		transform: scale(1.05);
	}

	.content {
		/* flex-grow: 1; */
		height: 50%;
		display: flex;
		flex-direction: column;
		padding: 1.25rem 0.5rem 0.5rem;
		        /* Add these to distribute the remaining space visually appealingly */
				gap: 1rem;
        justify-content: space-between;
	}

	.pub-date {
		font-size: 0.875rem;
		color: var(--color-text-muted, #666);
		margin-bottom: 0.5rem;
		display: block;
		font-weight: 400;
	}

	h2 {
		margin: 0.5rem 0 1rem;
		font-size: 1.5rem;
		font-weight: 600;
		line-height: 1.3;
		height: 3.9rem; /* 1.5rem font-size * 1.3 line-height * 2 lines */
		overflow: hidden;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		text-overflow: ellipsis;
	}

	p {
		line-height: 1.5;
		/* margin-bottom: 1rem; */
		overflow: hidden;
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		text-overflow: ellipsis;
	}

	p:not(.read-more) {
		height: 4.5rem; /* 1rem font-size * 1.5 line-height * 3 lines */
	}

	.read-more {
		margin-top: auto;
		color: var(--color-primary);
		font-weight: 500;
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		transition: gap 0.2s ease;
	}

	.blog__card:hover .read-more {
		gap: 0.75rem;
	}
</style>