---
import { Image } from "astro:assets";
import BaseLayout from "../../layouts/BaseLayout.astro";

import { type CollectionEntry, getCollection, render } from "astro:content";

const posts: CollectionEntry<"blog">[] = (await getCollection("blog")).sort(
  (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
)
---


<BaseLayout title="Blog" description="A collection of blog posts" pageTitle="Blog">
  <main>
    <section>
      <div class="container">

        <ul>
          {
            posts.map((post) => (
              <li>
                <a href={`/blog/${post.id}/`}>
                  <Image
                    width={720}
                    height={360}
                    src={post.data.image}
                    alt={post.data.title}
                  />
                  <h4 class="title">{post.data.title}</h4>
                  <p class="description">
                    {post.data.description}
                  </p>
                </a>
              </li>
            ))
          }
        </ul>
      </div>
    </section>
  </main>
</BaseLayout>

<style>
  .container {
    margin-top: 2rem;
    text-align: center;
    display: grid;
    place-items: center;
  }

  li {
    /* max-width: 300px; */
  }
</style>